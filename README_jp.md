# 日本の人口動向グラフ

このシングルページアプリケーション（SPA）は、株式会社ゆめみのコーディングテストとして開発されました。
面接の結果にかかわらず、この開発プロセスは貴重な学習経験となりました。
以下に、ゆめみ社のエンジニアからの好意的なフィードバックと、開発の道のりを詳述します。

## ゆめみのエンジニアからのレビュー

> なお、担当者からのレビューは以下の通りです。
> よろしければ参考までにご確認いただけますと幸いです。
> ーーーーーーーーーーーーーーーーーーーー
>
> ## Goodチェック
>
> - 独自にワイヤーフレームを解釈してデザイン・実装している
> - API で取得したデータをキャッシュしている
> - API のエラーハンドリングができている
> - 通信時のローディングの UI を実装している
> - データが存在しないときに専用の UI を用意している
> - README が充実している
> - API-key をアプリケーションコードから秘匿している
> - API-key をビルドファイルから秘匿している
> - コメントの量が適切である
> - コミットの粒度が適切である
> - 比較的短時間（15時間以内）で完成している
> - 最新の Next.js 15 と React 19 を活用し、モダンな実装が行われている
> - コンポーネント設計が適切で、機能ごとに責務が分離されている
>   - 汎用的な UI コンポーネントと機能固有のコンポーネントを分離するアプローチを採択している
> - use server ディレクティブを活用して、クライアントに API キーが漏洩しないよう秘匿されている
> - Zustand による状態管理と TanStack Query によるデータフェッチが効率的に実装されている
> - ローディング状態やエラー状態のハンドリングが丁寧に実装されている
> - 都道府県チェックのリセットボタンを用意されている
> - 都道府県チェックボックス一覧にアコーディオン UI をつけられている
> - Recharts の tickFormatter を活用して数値のカンマ区切り表示をされている
> - 生成 AI を活用して充実したテストの実装がされている（README より）
> - メモとして振り返りを記載することで、思考や意思決定を残している
>
> ## Nextチェック
>
> - ラベルをクリックしてチェックボックスを操作できない
> - チェックボックスにホバーした時に cursor: pointer になっていない
> - html 要素の lang が ja でない
> - Prettier の実行スクリプトが定義されておらず、一部ファイルのフォーマットがかけられていない
>
> ## 総合評価
>
> Webプログラミング歴が約半年という比較的短い経験にもかかわらず、タスク管理をはじめ、設計・実装・テストにおいて全体的に高水準な成果が見受けられ、短時間で効率的に開発が進められていると感じました。
>
> モダンな技術スタックの理解と明晰な実装・設計力をお持ちのように感じます。

## TODO

- [x] 主要な依存関係のインストール：グラフ用の recharts、データ取得用の tanstack
- [x] ESLint、Prettier の設定（クラスの順序を整えるために prettier-tailwind プラグインを追加）
- [x] 認証情報の管理（ENV）
- [x] 状態管理のために TanStack Query を設定
- [x] より良い状態管理のために Zustand を使用？
- [x] APIからのデータ取得を開始
- [x] APIから都道府県および人口データの取得に成功
- [x] カスタムフックの作成
- [x] チャートコンポーネントの作成
- [x] 都道府県のチェックボックスコンポーネントの作成
- [x] カテゴリ選択コンポーネントの作成
- [x] エラーハンドリング
- [x] 主要な2つのコンポーネントのスケルトン追加
- [x] レイアウトとレスポンシブ対応の調整
- [x] テストの作成
- [x] デプロイ

## メモ

### 3/30 振り返り

アプリの土台（スキャフォールディング）を完了。  
ステージ管理のために Tanstack Query と Zustand を実装し、データの表示に成功。  
疑問点：クエリに使用したサーバーアクションでセキュリティ上の問題はないだろうか。  
アプリをデプロイした。

### 3/31 振り返り

あまり進捗がなかった。  
リセット用チェックボックス機能を追加。  
SSR のために app route を利用すべきか検討中。  
もしかすると、スキーマ検証のために Zod を導入するかもしれない。

### 4/1 振り返り

本日は大幅な進捗がありました。  
ライインチャート機能を追加。  
サーバーサイドキャッシュを正常に動作させることに成功。  
カードとチェックボックス用のスケルトンを構築。  
アプリの見た目も少し改善。

### 4/4 振り返り

リファクタリングに多くの時間を費やした。  
全体のUIを改良。  
AIを活用してテストを作成。  
提出の準備が整った。

## 重要ポイントチェックリスト

- [x] React（Next.js）を使用
- [x] TypeScript を使用
- [x] 適切な型定義を実施
- [x] ESLint を活用
- [x] Prettier を活用
- [x] ESLint と Prettier の連携を確認
- [x] 適切なコードフォーマット
- [?] 表示ロジックとビジネスロジックが分離されている
- [?] 意味のある HTML 要素を使用
- [x] Git を使用し、明確で意味のあるコミットメッセージを記録
- [?] 適切にテスト済み
- [x] リント・テスト用CI/CDを設定
- [?] 美しいUI
